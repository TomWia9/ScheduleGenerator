@page "/authentication/register"

@inherits RegisterBase

<EditForm Model="@UserForCreation" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <div class="card" style="height: 500px">
        <h4 class="card-header text-white" style="background: #121212;">Sign up to the Schedule Generator application</h4>


        <div class="card-body" style="background: #181818">
            <div class="form-group text-white">
                <label>Email</label>
                <InputText @bind-Value="UserForCreation.Email" class="form-control bg-dark text-white" />
                <ValidationMessage For="@(() => UserForCreation.Email)" />
            </div>
            <div class="form-group text-white">
                <label>Password</label>
                <InputText @bind-Value="UserForCreation.Password" type="password" class="form-control bg-dark text-white" />
                <ValidationMessage For="@(() => UserForCreation.Password)" />
            </div>
            <div class="form-group text-white">
                <label>Confirm password</label>
                <InputText @bind-Value="UserForCreation.ConfirmPassword" type="password" class="form-control bg-dark text-white" />
                <ValidationMessage For="@(() => UserForCreation.ConfirmPassword)" />
            </div>

            @if (!string.IsNullOrEmpty(Error))
            {
                <div class="alert alert-danger mt-3 mb-0">@Error</div>
            }
            @if (RegisterFailed == true)
            {
                <div class="alert alert-danger mt-3 mb-0">Something went wrong, try again later</div>
            }
            @if (RegisterFailed == false)
            {
                <div class="alert alert-success mt-3 mb-0">Successfully registered, you can login now</div>
            }
            @if (EmailConflict)
            {
                <div class="alert alert-warning mt-3 mb-0">The given email is already taken</div>
            }
        </div>
        <div class="card-footer text-white" style="background: #121212;">
            <button class="btn btn-primary">
                @if (Loading)
                {
                    <span class="spinner-border spinner-border-sm mr-1"></span>
                }
                Register
            </button>
        </div>

    </div>
</EditForm>
