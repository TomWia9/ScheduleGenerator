@page "/schedules/{Id:int}"
@inherits ScheduleBase

@if (Loading)
{
    <div class="d-flex align-items-center justify-content-center text-white">
        <strong>Loading...</strong>
        <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
    </div>
}
else if (LoadFailed)
{
    <div class="alert alert-danger mt-3 mb-0">Failed to load items, try again later</div>
}
else
{
    <div class="sticky-top d-flex justify-content-md-around mb-2 text-white w-100 border-bottom border-white">
        <h6>Monday</h6>
        <h6>Tuesday</h6>
        <h6>Wednesday</h6>
        <h6 class="mr-3">Thursday</h6>
        <h6 class="mr-3">Friday</h6>
    </div>

    <div class="d-flex justify-content-around mb-2" style="overflow-y: auto; height: 550px">

        <div class="text-white">
            @foreach (var item in ScheduleItemsState.ScheduleItems.Where(i => i.DayOfWeek == DayOfWeek.Monday))
            {
                <ScheduleItem Item="item"></ScheduleItem>
            }
        </div>
        <div class="text-white">
            @foreach (var item in ScheduleItemsState.ScheduleItems.Where(i => i.DayOfWeek == DayOfWeek.Tuesday))
            {
                <ScheduleItem Item="item"></ScheduleItem>
            }
        </div>
        <div class="text-white">
            @foreach (var item in ScheduleItemsState.ScheduleItems.Where(i => i.DayOfWeek == DayOfWeek.Wednesday))
            {
                <ScheduleItem Item="item"></ScheduleItem>
            }
        </div>
        <div class="text-white">
            @foreach (var item in ScheduleItemsState.ScheduleItems.Where(i => i.DayOfWeek == DayOfWeek.Thursday))
            {
                <ScheduleItem Item="item"></ScheduleItem>
            }
        </div>
        <div class="text-white">
            @foreach (var item in ScheduleItemsState.ScheduleItems.Where(i => i.DayOfWeek == DayOfWeek.Friday))
            {
                <ScheduleItem Item="item"></ScheduleItem>
            }
        </div>
    </div>

    <div class="w-100 d-flex justify-content-around border-top border-white mb-2">
        <button class="btn btn-primary mt-3 w-25" @onclick="() => CreateScheduleItemModal.Open()" type="button">
            Add item
        </button>
        <button class="btn btn-primary mt-3 w-25" type="submit">
            @if (Loading)
            {
                <span class="spinner-border spinner-border-sm mr-1"></span>
            }
            Save schedule
        </button>
        <button class="btn btn-primary mt-3 w-25" type="button">
            Download as pdf
        </button>
    </div>

    <CreateScheduleItemModal @ref="CreateScheduleItemModal" ScheduleId="@Id"></CreateScheduleItemModal>
}



